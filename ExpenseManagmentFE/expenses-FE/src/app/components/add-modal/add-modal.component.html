@if (loading) {
<app-loader></app-loader>
}

<div class="modal-wrapper" (click)="onClose()">
  <div
    class="bottom-screen"
    (click)="$event.stopPropagation()"
    [class.show]="close"
  >
    <button class="close-button" (click)="onClose()">
      <i class="pi pi-times"></i>
    </button>

    <div class="header">
      <h2>NUOVA TRANSAZIONE</h2>
    </div>

    <hr />

    <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
      <div class="p-grid">
        <div class="p-col-12 p-md-6">
          <div class="form-group">
            <label style="margin-right: 10px" for="amount">Importo(â‚¬)</label>
            <input
              id="amount"
              type="number"
              pInputText
              formControlName="amount"
            />
          </div>
        </div>
        <div class="p-col-12 p-md-6">
          <div class="form-group">
            <label style="margin-right: 15px" for="category">Categoria</label>
            <p-dropdown
              id="category"
              formControlName="category"
              [options]="categories"
              optionLabel="name"
              placeholder="Seleziona categoria"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
            ></p-dropdown>
          </div>
        </div>

        <div class="p-col-12 p-md-6">
          <div class="form-group">
            <label for="description" style="margin-right: 5px"
              >Descrizione</label
            >
            <input
              id="description"
              type="text"
              pInputText
              formControlName="description"
            />
          </div>
        </div>
        <div class="p-col-12 p-md-6">
          <div class="form-group">
            <label for="date" class="data-label">Data</label>
            <p-calendar
              id="date"
              formControlName="date"
              [showIcon]="true"
              [showOnFocus]="false"
              dateFormat="dd/mm/yy"
              [readonlyInput]="true"
            ></p-calendar>
          </div>
        </div>
        <div class="p-col-12 p-md-6">
          <div class="form-group">
            <label for="isIncome" style="margin-right: 10px"
              >Tipo di Transazione</label
            >
            <p-dropdown
              id="isIncome"
              formControlName="isIncome"
              [options]="isIncomeOptions"
              optionLabel="label"
              placeholder="Seleziona"
            ></p-dropdown>
          </div>
        </div>

        <div class="p-col-12">
          <div class="form-group">
            <button
              pButton
              class="button-add"
              type="submit"
              label="Aggiungi Transazione"
              [disabled]="!transactionForm.valid"
            ></button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
