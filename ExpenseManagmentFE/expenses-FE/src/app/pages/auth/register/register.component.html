<div
  class="register-container flex justify-content-center align-items-center min-h-screen"
>
  <div class="register-card surface-card shadow-2 border-round p-4">
    <div class="register-content">
      <div class="form-section text-center">
        <div
          class="title-container flex align-items-center justify-content-center gap-2 mb-3"
        >
          <div
            class="icon-container flex align-items-center justify-content-center bg-primary border-round text-white"
          >
            <mat-icon>person_add</mat-icon>
          </div>
          <h2>Registrati</h2>
        </div>
        <p class="text-secondary">
          Registrati su SaveUp e metti in ordine le tue finanze!
        </p>
        <hr class="separator my-3" />

        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <div class="grid">
            <div class="col-12 md:col-6">
              <div class="form-group mb-4">
                <label
                  for="firstName"
                  class="block text-left text-secondary mb-2"
                  >Nome</label
                >
                <input
                  pInputText
                  class="block email-input border-round"
                  id="firstName"
                  type="text"
                  placeholder="Nome"
                  formControlName="firstName"
                />
                @if (registerForm.get('firstName')?.invalid &&
                registerForm.get('firstName')?.touched) {
                <small class="p-error">Il campo Nome è obbligatorio.</small>
                }
              </div>
              <div class="form-group mb-4">
                <label for="lastName">Cognome</label>
                <input
                  pInputText
                  class="block email-input border-round"
                  id="lastName"
                  type="text"
                  placeholder="Cognome"
                  formControlName="lastName"
                />
                @if (registerForm.get('lastName')?.invalid &&
                registerForm.get('lastName')?.touched) {
                <small class="p-error">Il campo Cognome è obbligatorio.</small>
                }
              </div>
              <div class="form-group mb-4">
                <label for="picture">Immagine del profilo (Facoltativo)</label>
                <input
                  pInputText
                  class="email-input"
                  id="picture"
                  type="text"
                  placeholder="URL Immagine"
                  formControlName="picture"
                />
                @if (registerForm.get('picture')?.errors?.['invalidUrl'] &&
                registerForm.get('picture')?.touched) {
                <small class="p-error">Inserisci un URL valido.</small>
                }
              </div>
            </div>
            <div class="col-12 md:col-6">
              <div class="form-group mb-4">
                <label for="username">Email</label>
                <input
                  pInputText
                  class="email-input"
                  id="username"
                  type="email"
                  placeholder="Email"
                  formControlName="username"
                />
                @if (registerForm.get('username')?.invalid &&
                registerForm.get('username')?.touched) {
                <small class="p-error">Inserisci un'email valida.</small>
                }
              </div>
              <div class="form-group mb-4 relative">
                <label
                  for="password"
                  class="block text-left text-secondary mb-2"
                  >Password</label
                >
                <p-password
                  id="password"
                  class="p-password-input ng-invalid ng-dirty"
                  formControlName="password"
                  placeholder="Password"
                  promptLabel="Scegli una password"
                  weakLabel="Troppo debole"
                  mediumLabel="Password media"
                  strongLabel="Password sicura!"
                  [toggleMask]="true"
                >
                  <ng-template pTemplate="footer">
                    <p-divider />
                    <p class="m-0">Suggerimenti</p>
                    <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
                      <li>Almeno una maiuscola</li>
                      <li>Almeno un numero</li>
                      <li>Minimo 8 caratteri</li>
                    </ul>
                  </ng-template>
                </p-password>
                @if (registerForm.get('password')?.invalid &&
                registerForm.get('password')?.touched) {
                <small class="p-error"
                  >La password non è sufficientemente sicura.</small
                >
                }
              </div>
              <div class="form-group mb-4 relative">
                <label
                  for="confirmPassword"
                  class="block text-left text-secondary mb-2"
                  >Conferma Password</label
                >
                <p-password
                  id="confirmPassword"
                  class="p-password-input"
                  formControlName="confirmPassword"
                  placeholder="Conferma Password"
                  promptLabel="Conferma la password"
                  weakLabel="Troppo debole"
                  mediumLabel="Password media"
                  strongLabel="Password sicura!"
                  [toggleMask]="true"
                ></p-password>
                @if (registerForm.hasError('passwordMismatch',
                ['confirmPassword']) &&
                registerForm.get('confirmPassword')?.touched) {
                <small class="p-error">Le password non coincidono.</small>
                }
              </div>
            </div>
          </div>
          <p-button
            label="Registrati"
            type="submit"
            class="submit-button w-full"
          ></p-button>
        </form>

        <p class="login-link text-sm mt-4">
          Hai già un account?
          <a href="/login" class="login-link-bold font-bold text-primary"
            >Accedi</a
          >
        </p>
      </div>
    </div>
  </div>
</div>
